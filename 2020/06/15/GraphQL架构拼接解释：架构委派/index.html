<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>GraphQL架构拼接解释：架构委派 - 知识铺</title><meta description="架构拼接是 GraphQL 社区中的一个全新的主题。通常，它是指合并和连接多个 GraphQL 架构（或架构定义）以创建单个 GraphQL API 的行为。  架构拼接是一种新的、简便的方法来组合和重用 GraphQL API 架构拼接有两个主要概念：  架构委派：架构委派的核心思想是将特定解析器的调用转发（_委托_）到另一个解析器。从本质上讲，架构定义的相应字段正在”重新布线”。 架构合并：架"><meta property="og:type" content="blog"><meta property="og:title" content="GraphQL架构拼接解释：架构委派"><meta property="og:url" content="https://zshipu.com/2020/06/15/GraphQL%E6%9E%B6%E6%9E%84%E6%8B%BC%E6%8E%A5%E8%A7%A3%E9%87%8A%EF%BC%9A%E6%9E%B6%E6%9E%84%E5%A7%94%E6%B4%BE/"><meta property="og:site_name" content="知识铺"><meta property="og:description" content="架构拼接是 GraphQL 社区中的一个全新的主题。通常，它是指合并和连接多个 GraphQL 架构（或架构定义）以创建单个 GraphQL API 的行为。  架构拼接是一种新的、简便的方法来组合和重用 GraphQL API 架构拼接有两个主要概念：  架构委派：架构委派的核心思想是将特定解析器的调用转发（_委托_）到另一个解析器。从本质上讲，架构定义的相应字段正在”重新布线”。 架构合并：架"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img.colabug.com/noimg.png#aaiMVna.jpg"><meta property="article:published_time" content="2020-06-15T10:36:56.000Z"><meta property="article:modified_time" content="2020-09-08T14:03:00.352Z"><meta property="article:author" content="知识铺"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://img.colabug.com/noimg.png#aaiMVna.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://zshipu.com/2020/06/15/GraphQL%E6%9E%B6%E6%9E%84%E6%8B%BC%E6%8E%A5%E8%A7%A3%E9%87%8A%EF%BC%9A%E6%9E%B6%E6%9E%84%E5%A7%94%E6%B4%BE/"},"headline":"知识铺","image":["https://img.colabug.com/noimg.png#aaiMVna.jpg"],"datePublished":"2020-06-15T10:36:56.000Z","dateModified":"2020-09-08T14:03:00.352Z","author":{"@type":"Person","name":"知识铺"},"description":"架构拼接是 GraphQL 社区中的一个全新的主题。通常，它是指合并和连接多个 GraphQL 架构（或架构定义）以创建单个 GraphQL API 的行为。  架构拼接是一种新的、简便的方法来组合和重用 GraphQL API 架构拼接有两个主要概念：  架构委派：架构委派的核心思想是将特定解析器的调用转发（_委托_）到另一个解析器。从本质上讲，架构定义的相应字段正在”重新布线”。 架构合并：架"}</script><link rel="canonical" href="https://zshipu.com/2020/06/15/GraphQL%E6%9E%B6%E6%9E%84%E6%8B%BC%E6%8E%A5%E8%A7%A3%E9%87%8A%EF%BC%9A%E6%9E%B6%E6%9E%84%E5%A7%94%E6%B4%BE/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="2183476622" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.1.1"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="知识铺" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-06-15T10:36:56.000Z" title="2020-06-15T10:36:56.000Z">2020-06-15</time>发表</span><span class="level-item"><time dateTime="2020-09-08T14:03:00.352Z" title="2020-09-08T14:03:00.352Z">2020-09-08</time>更新</span><span class="level-item"> 知识铺 </span><span class="level-item">33 分钟读完 (大约4900个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">GraphQL架构拼接解释：架构委派</h1><div class="content"><p>架构拼接是 GraphQL 社区中的一个全新的主题。通常，它是指合并和连接多个 GraphQL 架构（或<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9ibG9nLmdyYXBoLmNvb2wvaG93LWRvLWdyYXBocWwtcmVtb3RlLXNjaGVtYXMtd29yay03MTE4MjM3Yzg5ZDcjMzFiMg=="><em>架构定义</em></a>）以创建单个 GraphQL API 的行为。</p>
<p><img src="https://img.colabug.com/noimg.png#aaiMVna.jpg"></p>
<p>架构拼接是一种新的、简便的方法来组合和重用 GraphQL API</p>
<p>架构拼接有两个主要概念：</p>
<ul>
<li><strong>架构委派</strong>：架构委派的核心思想是将特定解析器的调用转发（_委托_）到另一个解析器。从本质上讲，架构定义的相应字段正在”重新布线”。</li>
<li><strong>架构合并：</strong>架构合并是创建两个（或更多）现有 GraphQL API_的联合_的想法。如果所涉及的架构完全分离，这没有问题-如果没有，则需要有一种方法来解决它们的命名冲突。</li>
</ul>
<p>请注意，在大多数情况下，委派和合并实际上将一起使用，我们最终将<strong>采用一种混合方法，该方法同时使用这两种方法</strong>。在本系列文章中，我们将单独介绍它们，以确保每个概念都能很好地理解。</p>
<h3 id="示例：构建自定义-GitHub-API"><a href="#示例：构建自定义-GitHub-API" class="headerlink" title="示例：构建自定义 GitHub API"></a>示例：构建自定义 GitHub API</h3><p>让我们从基于公共<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9kZXZlbG9wZXIuZ2l0aHViLmNvbS92NC8=">GitHub GraphQL API</a>的示例开始。假设我们想要构建一个小型应用程序，提供有关<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbA==">Graphcool GitHub 组织</a>的信息。</p>
<p>应用所需的 API 应公开以下功能：</p>
<ul>
<li>检索有关 Graphcool 组织的信息（如其<em>ID、__电子邮件地址_、_头像 URL_或_固定存储库</em> )</li>
<li>按名称从 Graphcool 组织检索存储库列表</li>
<li>检索有关应用本身的简短说明</li>
</ul>
<p>让我们从<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDQ1OTg=">GitHub 的 GraphQL 架构定义</a>中探索类型，了解如何将需求映射到架构的根字段。<code>[Query](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDQ1OTg=)</code></p>
<h4 id="要求-1：检索有关-Graphcool-组织的信息"><a href="#要求-1：检索有关-Graphcool-组织的信息" class="headerlink" title="要求 1：检索有关 Graphcool 组织的信息"></a>要求 1：检索有关 Graphcool 组织的信息</h4><p>第一个功能，检索有关 Graphcool 组织的信息，可以通过使用类型上的根字段来实现：<code>repositoryOwner``````Query</code></p>
<p>我们可以发送以下查询来询问有关 Graphcool 组织的信息：</p>
<p>当我们提供作为字段时，它的工作原理。<code>&quot;graphcool&quot;``````login``````repositoryOwner</code></p>
<p>这里的一个问题是，我们不能以简单的方式要求，因为只是一个没有字段的接口。但是，由于我们知道 Graphcool 组织的具体类型确实如此，因此我们可以在查询中使用<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cDovL2dyYXBocWwub3JnL2xlYXJuL3F1ZXJpZXMvI2lubGluZS1mcmFnbWVudHM="><em>内联片段</em></a>来解决此问题：<code>email``````[RepositoryOwner](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDYxNjE=)``````email``````[Organization](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDMwMDU=)</code></p>
<p>好的，这样这将起作用，但我们已经触及了一些摩擦点，不允许为了我们的应用而直接使用 GitHub GraphQL API。</p>
<p>理想情况下，我们的 API 只会公开一个根字段，该字段允许直接请求我们想要的信息，而无需在每个查询上提供参数，并让我们直接请求字段：<code>Organization</code></p>
<h4 id="要求-2：按名称检索-Graphcool-存储库列表"><a href="#要求-2：按名称检索-Graphcool-存储库列表" class="headerlink" title="要求 2：按名称检索 Graphcool 存储库列表"></a>要求 2：按名称检索 Graphcool 存储库列表</h4><p>第二个要求如何，按它们的名称检索 Graphcool 存储库的列表。再次查看类型，这变得有点复杂。API 不允许直接检索存储库列表，而是可以通过使用以下根字段提供 和 存储库来请求单个存储库：<code>Query``````owner``````name</code></p>
<p>下面是相应的查询：</p>
<p>但是，我们_实际上_需要的应用程序（为了避免发出多个请求）是一个根字段，如下所示：</p>
<h4 id="要求-3：检索有关应用本身的简短说明"><a href="#要求-3：检索有关应用本身的简短说明" class="headerlink" title="要求 3：检索有关应用本身的简短说明"></a>要求 3：检索有关应用本身的简短说明</h4><p>我们的 API 应该能够返回描述应用的句子，例如 。<code>This app provides information about the Graphcool GitHub organization</code></p>
<p>这当然是一个完全自定义的要求，我们不能满足基于 GitHub API - 但很明显，我们需要实现它自己，可能与一个简单的根字段像这样：<code>Query</code></p>
<h4 id="定义应用程序架构"><a href="#定义应用程序架构" class="headerlink" title="定义应用程序架构"></a>定义应用程序架构</h4><p>现在，我们了解 API 所需的功能以及为架构定义的理想类型：<code>Query</code></p>
<p>显然，此架构定义本身是不完整的：它错过了 和 类型的定义。解决此问题的一个简单方法是手动复制和粘贴 GitHub 架构定义中的定义。<code>[Organization](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDMwMDU=)``````[Repository](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDUzNDA=)</code></p>
<p>此方法很快就会变得麻烦，因为这些类型定义本身依赖于架构中的其他类型（例如，类型具有类型字段），然后还需要手动复制这些字段。此依赖关系链进入架构的深度没有限制，您甚至可能最终手动复制完整的架构定义。<code>Repository``````[codeOfconduct](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDUzNTc=)``````[CodeOfConduct](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ2MtY29kZXNuaXBwZXRzL2E1NGFiMjc5ZjZlYTE4MWYxM2EwMWEyMzJmMWFhOTU4I2ZpbGUtZ2l0aHViLWdyYXBocWwtTDQyMA==)</code></p>
<p>请注意，手动复制类型时，可通过三种方式完成此操作：</p>
<ul>
<li>整个类型复制过来，不添加其他字段</li>
<li>复制整个类型并添加其他字段（或重命名现有字段）</li>
<li>仅复制类型字段的子集</li>
</ul>
<p>简单地复制完整类型的第一种方法是最直接的方法。这可以使用 自动使用，如下一节所述。<code>[graphql-import](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaHFsLWltcG9ydA==)</code></p>
<p>如果将其他字段添加到类型定义或重命名现有字段，则需要确保实现相应的解析器，因为基础 API 当然不能处理解析这些新字段的问题。</p>
<p>最后，您可能决定仅复制类型字段的子集。如果不想公开类型的所有字段（基础架构可能具有不希望在应用程序架构中公开的类型上的字段），则可能是可取的。<code>password``````User</code></p>
<h4 id="导入GraphQL类型定义"><a href="#导入GraphQL类型定义" class="headerlink" title="导入GraphQL类型定义"></a>导入GraphQL类型定义</h4><p>该程序包允许您跨不同的文件共享类型定义，从而为您节省该手动工作。可以从另一个 GraphQL 架构定义导入类型，如下所示：<code>[graphql-import](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaHFsLWltcG9ydA==)``````.graphql</code></p>
<p>在 JavaScript 代码中，您现在可以使用函数，它将为您解析依赖项，确保架构定义完成。<code>importSchema</code></p>
<h4 id="实现-API"><a href="#实现-API" class="headerlink" title="实现 API"></a>实现 API</h4><p>有了上面的架构定义，我们才只过了一半。仍然缺少的是架构以_解析器_函数的形式_实现的_实现。</p>
<p>如果您此时感到迷失，请务必阅读本文，其中介绍了 GraphQL 架构的基本机制和内部工作原理。</p>
<p>让我们来思考如何实现这些解析器！第一个版本可以如下所示：</p>
<p>解析器是微不足道的，我们可以返回一个描述我们的应用程序的简单字符串。但是，如何处理我们实际需要从 GitHub GraphQL API 返回信息的那些和那里的信息？<code>info``````graphcool``````graphcoolRepositories</code></p>
<p>在此处实现此项的天真方法是查看参数以检索传入查询_的选择集_，然后从头开始构造另一个具有相同选择集的 GraphQL 查询并将其发送到 GitHub API。为 GitHub GraphQL API 创建<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9ibG9nLmdyYXBoLmNvb2wvaG93LWRvLWdyYXBocWwtcmVtb3RlLXNjaGVtYXMtd29yay03MTE4MjM3Yzg5ZDc="><em>远程架构</em></a>甚至可以促进这一点，但总体而言，过程仍是一个相当冗长且繁琐的过程。<code>info</code></p>
<p>这正是_架构委派_发挥作用的地方！我们之前看到 GitHub 的架构公开了两个根字段，这两个根字段（在某种程度上）满足我们的需求：和 。我们现在可以利用它来保存创建一个全新的查询的工作，而不是_转发_传入的查询。<code>repositoryOwner``````repository</code></p>
<h4 id="委派到其他架构"><a href="#委派到其他架构" class="headerlink" title="委派到其他架构"></a>委派到其他架构</h4><p>因此，我们不是试图构造一个全新的查询，而是简单地将传入_查询委托给另_一个架构。我们将用于的 API 称为 。提供。<code>[delegateToSchema](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2Fwb2xsb2dyYXBocWwvZ3JhcGhxbC10b29scy9ibG9iL21hc3Rlci9zcmMvc3RpdGNoaW5nL2RlbGVnYXRlVG9TY2hlbWEudHMjTDMx)``````[graphql-tools](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly93d3cuYXBvbGxvZ3JhcGhxbC5jb20vZG9jcy9ncmFwaHFsLXRvb2xzLw==)</code></p>
<p><code>delegateToSchema</code>接收七个参数（按以下顺序排列）：</p>
<ol>
<li><code>schema</code>：可执行实例（这是我们想要将执行委托给_的目标架构_）<code>[GraphQLSchema](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cDovL2dyYXBocWwub3JnL2dyYXBocWwtanMvdHlwZS8jZ3JhcGhxbHNjaGVtYQ==)</code></li>
<li><code>fragmentReplacements</code>：包含内联片段的对象（这是针对本文中不会讨论的更高级的案例）</li>
<li><code>operation</code>： 具有三个值 （、 或 ） 之一的字符串，指示要委派给哪个根类型<code>&quot;query&quot;``````&quot;mutation&quot;``````&quot;subscription&quot;</code></li>
<li><code>fieldName</code>：我们要委派给的根字段的名称</li>
<li><code>args</code>：我们委派给的根字段的输入参数</li>
<li><code>context</code>：通过目标的解析器链传递的上下文对象<code>schema</code></li>
<li><code>info</code>：包含有关要委派的查询的信息的对象</li>
</ol>
<p>为了让我们使用此方法，我们首先需要一个表示 GitHub GraphQL API 的可执行实例。我们可以从 获取它使用 。<code>GraphQLSchema``````[makeRemoteExecutableSchema](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9ibG9nLmdyYXBoLmNvb2wvaG93LWRvLWdyYXBocWwtcmVtb3RlLXNjaGVtYXMtd29yay03MTE4MjM3Yzg5ZDc=)``````graphql-tools</code></p>
<p>请注意，GitHub 的 GraphQL API 需要身份验证，因此您需要身份验证<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL3NldHRpbmdzL3Rva2Vucw==">令牌</a>才能实现此工作。您可以按照<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9kZXZlbG9wZXIuZ2l0aHViLmNvbS92NC9ndWlkZXMvZm9ybWluZy1jYWxscy8jYXV0aGVudGljYXRpbmctd2l0aC1ncmFwaHFs">本指南</a>获取本指南。</p>
<p>为了为 GitHub API 创建远程架构，我们需要两件事：</p>
<ul>
<li>其_架构定义_（以实例的形式）<code>GraphQLSchema</code></li>
<li>知道如何从中获取数据<code>[HttpLink](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2Fwb2xsb2dyYXBocWwvYXBvbGxvLWxpbmsvdHJlZS9tYXN0ZXIvcGFja2FnZXMvYXBvbGxvLWxpbmstaHR0cA==)</code></li>
</ul>
<p>我们可以使用以下代码来实现此目的：</p>
<p><code>[GitHubLink](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL25pa29sYXNidXJrL2dpdGh1Yi1zY2hlbWEtZGVsZWdhdGlvbi9ibG9iL21hc3Rlci9zcmMvR2l0SHViTGluay5qcw==)</code>只是一个简单的包装顶部，提供了一些方便围绕创建所需的Link组件。<code>HttpLink</code></p>
<p>真棒，我们现在有一个可执行版本的GitHubGraphQL API，我们可以委托在我们的解析器！：塔达：让我们首先实现解析器：<code>graphcool</code></p>
<p>我们传递函数预期的七个参数。总体而言，没有意外：是 GitHub GraphQL API 的远程可执行架构。在那里，我们希望将我们自己的查询的执行委托给 GitHub API 的查询。由于该字段需要一个参数，因此我们将其作为值提供。最后，我们只是通过解析器链传递 和 对象。<code>delegateToSchema``````schema``````graphcool``````repositoryOwner``````login``````&quot;graphcool&quot;``````info``````context</code></p>
<p>解析器可以以类似的方式接近，但它有点棘手。与以前的实现不同的是，GitHub 架构定义中我们和原始字段的类型与以前不相上下。我们现在需要返回一个存储库数组，而不是单个存储库数组。<code>graphcoolRepositories``````graphcoolRepositories: [Repository!]!``````repository: Repository</code></p>
<p>因此，我们继续使用，以确保我们可以同时委派多个查询，并将其执行结果捆绑到一系列承诺中：<code>Promise.all</code></p>
<p>就是这样！现在，我们已经为自定义 GraphQL API 实现了所有三个解析器。虽然第一个 （for ） 微不足道，只是返回一个自定义字符串，并且使用_架构委派_将查询的执行转发到基础 GitHub API。<code>info``````graphcool``````graphcoolRepositories</code></p>
<p>如果要查看此代码的工作示例，请查看此<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL25pa29sYXNidXJrL2dpdGh1Yi1zY2hlbWEtZGVsZWdhdGlvbg==">存储库</a>。</p>
<h3 id="使用Graphql工具的架构委派"><a href="#使用Graphql工具的架构委派" class="headerlink" title="使用Graphql工具的架构委派"></a>使用Graphql工具的架构委派</h3><p>在上面在 GitHub 上构建自定义 GraphQL API 的示例中，我们看到了如何从编写样板代码以进行查询执行中节省我们。我们可以使用 提供的 API 将查询的执行委托给 的另一个（可执行的）实例，而不是从头开始构造新查询，并使用 或使用 一些其他 HTTP 工具将其发送过来。方便地，此实例可以创建为远程架构。<code>[delegateToSchema](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2Fwb2xsb2dyYXBocWwvZ3JhcGhxbC10b29scy9ibG9iL21hc3Rlci9zcmMvc3RpdGNoaW5nL2RlbGVnYXRlVG9TY2hlbWEudHM=)``````fetch``````[graphql-request](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaHFsLXJlcXVlc3Q=)``````graphql-tools``````GraphQLSchema</code></p>
<p>在高级别上，只需充当<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cDovL2dyYXBocWwub3JnL2dyYXBocWwtanM=">GraphQL.js</a>函数的”代理”。这意味着，在引擎盖下，它将根据作为参数传递的信息重新组合 GraphQL 查询（或突变）。构造查询后，它所做的只是<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2Fwb2xsb2dyYXBocWwvZ3JhcGhxbC10b29scy9ibG9iL21hc3Rlci9zcmMvc3RpdGNoaW5nL2RlbGVnYXRlVG9TY2hlbWEudHMjTDg0">使用架构和查询调用</a>。<code>delegateToSchema``````[execute](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cDovL2dyYXBocWwub3JnL2dyYXBocWwtanMvZXhlY3V0aW9uLyNleGVjdXRl)``````[execute](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2Fwb2xsb2dyYXBocWwvZ3JhcGhxbC10b29scy9ibG9iL21hc3Rlci9zcmMvc3RpdGNoaW5nL2RlbGVnYXRlVG9TY2hlbWEudHMjTDg0)</code></p>
<p>因此，架构委派不一定要求目标架构是远程架构，也可以使用本地架构来完成。在这方面，架构委派是一个非常灵活的工具 — 您甚至可能希望_在同_一架构中委派。这基本上是从 中采用的方法，其中多个架构首先合并到单个架构中，然后解析器重新布线。<code>[mergeSchemas](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly93d3cuYXBvbGxvZ3JhcGhxbC5jb20vZG9jcy9ncmFwaHFsLXRvb2xzL3NjaGVtYS1zdGl0Y2hpbmcuaHRtbCNtZXJnZVNjaGVtYXM=)``````graphql-tools</code></p>
<p>从本质上讲，架构委派是能够轻松地将查询转发到现有的 GraphQL API。</p>
<h3 id="架构绑定：重用-GraphQL-API-的简便方法"><a href="#架构绑定：重用-GraphQL-API-的简便方法" class="headerlink" title="架构绑定：重用 GraphQL API 的简便方法"></a>架构绑定：重用 GraphQL API 的简便方法</h3><p>具备我们新获得的架构委派知识，我们可以引入一个新概念，它只不过是架构委托之上的一个薄的便利层，称为_架构绑定_。</p>
<h4 id="公共GraphQL-API-的绑定"><a href="#公共GraphQL-API-的绑定" class="headerlink" title="公共GraphQL API 的绑定"></a>公共GraphQL API 的绑定</h4><p>架构绑定的核心思想是提供一种使现有 GraphQL API 可重用的简单方法，以便其他开发人员现在可以通过 NPM 将其项目拉入其中。这允许一种全新的方法来构建 GraphQL”网关”，其中非常容易组合多个 GraphQL API 的功能。</p>
<p>使用 GitHub API 的专用绑定，我们现在可以从上面简化示例。现在，此部分不是手动创建远程可执行架构，而是由包完成。以下是完整实现在删除以前委托给 GitHub API 所需的所有初始设置代码的位置：<code>[graphql-binding-github](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaHFsLWJpbmRpbmctZ2l0aHVi)</code></p>
<p>我们不是自己创建远程架构，而是实例化从导入的类并使用其函数。然后，它将在引擎盖下实际执行请求。<code>[GitHub](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaHFsLWJpbmRpbmctZ2l0aHViL2Jsb2IvbWFzdGVyL3NyYy9pbmRleC50cyNMMjA=)``````graphql-binding-github``````delegate``````delegateToSchema</code></p>
<p>公共 GraphQL API 的架构绑定可以在开发人员之间共享。旁边还有一个绑定可用于 Yelp GraphQL API：由<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly90d2l0dGVyLmNvbS9kZXZhbmJlaXRlbA==">Devan Beitel</a><code>[graphql-binding-github](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly93d3cuZ29vZ2xlLmRlL3NlYXJjaD9xPWdyYXBocWwtZ2l0aHViLWJpbmRpbmcmYW1wO29xPWdyYXBocWwtZ2l0aHViLWJpbmRpbmcmYW1wO2Fxcz1jaHJvbWUuLjY5aTU3LjQ4NTlqMGoxJmFtcDtzb3VyY2VpZD1jaHJvbWUmYW1wO2llPVVURi04)``````[graphql-binding-yelp](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL0RldmFuQi9ncmFwaHFsLWJpbmRpbmcteWVscA==)</code></p>
<h4 id="自动生成的委托函数"><a href="#自动生成的委托函数" class="headerlink" title="自动生成的委托函数"></a>自动生成的委托函数</h4><p>这些类型的架构绑定的 API 甚至可以改进到_自动生成_委托函数的级别。绑定可以公开以相应的根字段命名的函数：，而不是编写以下内容。<code>github.delegate(&#39;query&#39;, &#39;repository&#39;, ... )``````github.query.repository( ... )</code></p>
<p>当这些委托函数在生成步骤中生成，并且基于强类型语言（如 TypeScript 或 Flow），此方法甚至会为与其他 GraphQL API 交互提供编译时类型安全性！</p>
<p>要了解此方法的外观，请查看允许轻松为 Graphcool 服务生成架构绑定的存储库，并使用上述自动生成委托函数的方法。<code>[graphcool-binding](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaGNvb2wtYmluZGluZw==)</code></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这是我们系列”理解GraphQL架构拼接”的第二篇文章。在第一篇文章中，我们做了一些基础工作，并了解了远程（可执行）架构，这些架构是大多数架构拼接方案的基础。</p>
<p>在本文中，我们主要通过基于<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9kZXZlbG9wZXIuZ2l0aHViLmNvbS92NC8=">GitHub GraphQL API（</a>该示例的代码<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL25pa29sYXNidXJrL2dpdGh1Yi1zY2hlbWEtZGVsZWdhdGlvbg==">可在此处</a>提供）来讨论_架构委派_的概念。架构委派是一种机制，用于将解析器函数的执行转发（_委托_）到不同（或甚至相同）的 GraphQL 架构中的另一个解析器。它的关键好处是，我们不必从头开始构造一个全新的查询，而是可以重用和转发传入查询的（部分）。</p>
<p>使用架构委派作为基础时，可以创建专用 NPM 包，以便轻松共享现有 GraphQL API 的可重用_架构绑定_。要了解这些外观，可以签出<a href="https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaHFsLWJpbmRpbmctZ2l0aHVi">GitHub API 的绑定</a>，以及允许轻松为任何 Graphcool 服务生成绑定的绑定。<code>[graphcool-binding](https://zshipu.com/t?url=https://www.colabug.com/goto/aHR0cHM6Ly9naXRodWIuY29tL2dyYXBoY29vbC9ncmFwaGNvb2wtYmluZGluZw==)</code></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>GraphQL架构拼接解释：架构委派</p><p><a href="https://zshipu.com/2020/06/15/GraphQL%E6%9E%B6%E6%9E%84%E6%8B%BC%E6%8E%A5%E8%A7%A3%E9%87%8A%EF%BC%9A%E6%9E%B6%E6%9E%84%E5%A7%94%E6%B4%BE/">https://zshipu.com/2020/06/15/GraphQL%E6%9E%B6%E6%9E%84%E6%8B%BC%E6%8E%A5%E8%A7%A3%E9%87%8A%EF%BC%9A%E6%9E%B6%E6%9E%84%E5%A7%94%E6%B4%BE/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>知识铺</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-06-15</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2020-09-08</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5f58e448b1477000121881fb&amp;product=inline-share-buttons" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/weixin.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/06/16/dubbo%20go%20%E5%88%9D%E6%AD%A5%E4%BD%BF%E7%94%A8/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">dubbo go 初步使用</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/06/14/GraphQL%20%E4%BD%9C%E4%B8%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%20API%20%E7%BD%91%E5%85%B3/"><span class="level-item">GraphQL 作为微服务的 API 网关</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://zshipu.com/2020/06/15/GraphQL%E6%9E%B6%E6%9E%84%E6%8B%BC%E6%8E%A5%E8%A7%A3%E9%87%8A%EF%BC%9A%E6%9E%B6%E6%9E%84%E5%A7%94%E6%B4%BE/';
            this.page.identifier = '2020/06/15/GraphQL架构拼接解释：架构委派/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'zsp' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://www.gravatar.com/avatar/2396bdfe5aadb513e676094004dde830?s=128" alt="edwin"></figure><p class="title is-size-4 is-block line-height-inherit">edwin</p><p class="is-size-6 is-block">知识铺</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国 杭州</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">189</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">2</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/liliang8858" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/liliang8858"><i class="Github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="社区"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="设计"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/go/"><span class="level-start"><span class="level-item">go</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-07-16T10:43:02.000Z">2020-07-16</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/16/Spring%20Cloud%20Gateway+Nacos%EF%BC%8Cyml+properties%E4%B8%A4%E7%A7%8D%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F%E6%90%AD%E5%BB%BA%E7%BD%91%E5%85%B3%E6%9C%8D%E5%8A%A1/">Spring Cloud Gateway+Nacos，yml+properties两种配置文件方式搭建网关服务</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-07-16T10:39:59.000Z">2020-07-16</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/16/Spring%20Cloud+nacos+Feign%EF%BC%8C%E5%AE%9E%E7%8E%B0%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%8F%8A%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/">Spring Cloud+nacos+Feign，实现注册中心及配置中心</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-07-16T10:32:26.000Z">2020-07-16</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/16/Nacos%E4%BD%9C%E4%B8%BA%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E6%97%B6%EF%BC%8C%E5%A4%9A%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%85%B1%E7%94%A8%E4%B8%80%E4%B8%AAdataId%E7%9A%84%E9%85%8D%E7%BD%AE/">Nacos作为配置中心时，多个服务共用一个dataId的配置</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-07-16T09:34:29.000Z">2020-07-16</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/16/SpringCloudAlibaba(%E4%B8%89)%EF%BC%9A%E4%BD%BF%E7%94%A8Nacos%E4%BD%9C%E4%B8%BA%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83/">SpringCloudAlibaba(三)：使用Nacos作为配置中心</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-07-16T09:31:53.000Z">2020-07-16</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/16/Nacos%20%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/">Nacos 集群部署</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">37</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">62</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/11/"><span class="level-start"><span class="level-item">十一月 2019</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web/"><span class="tag">web</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="2183476622" data-ad-slot="pub-2874221941555456" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="知识铺" height="28"></a><p class="size-small"><span>&copy; 2020 知识铺</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://zshipu.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>