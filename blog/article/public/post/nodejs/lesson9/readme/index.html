<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="知识铺">
        <meta name="description" content="《正则表达式》 目标 var web_development = &quot;python php ruby javascript jsonp perhapsphpisoutdated&quot;; 找出其中 包含 p 但不包含 ph 的所有单词，即 [ &#39;python&#39;, &#39;javascript&#39;, &#39;jsonp&#39; ] 知识点 正则表达式的使用 js 中的正则表达式与 pcre(http://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions ) 的区别 课程内">
        <link rel="alternate" href="https://blog.zshipu.com/article/feed.xml" type="application/rss+xml" title="知识铺">
        <link rel="icon" href="https://blog.zshipu.com/article/favicon.ico">
        <title>lesson9- 正则表达式 - 知识铺</title>
        <link rel="stylesheet" href="https://blog.zshipu.com/article/css/highlight.js.min.css">
        <link rel="stylesheet" href="https://blog.zshipu.com/article/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://blog.zshipu.com/article/css/bootstrap-theme.css">
        <link rel="stylesheet" href="https://blog.zshipu.com/article/css/font-awesome/css/font-awesome.min.css" />
        
        <link rel="stylesheet" href="https://blog.zshipu.com/article/css/hugo-org.css">
        
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
            })(window,document,'script','dataLayer','GTM-WLWJSST');</script>
        
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-2874221941555456",
                enable_page_level_ads: true
            });
        </script>
    </head>

<body role="document">
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://blog.zshipu.com/article/">知识铺</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li ><a href="https://blog.zshipu.com/">主页</a></li>
                    
                    
                    <li ><a href="https://blog.zshipu.com/article/post/">文章列表</a></li>
                    
                </ul>
            </div>
        </div>
    </nav>



<div class="container">
<div class="row">
    <div class="col-xs-12 col-sm-11 doc-main">
        <main role="main">
            <article>
                <a id="title"></a>
                <h1 class="doc-entry-title">lesson9- 正则表达式</h1>
                
                <div class="doc-entry-meta small">
                    <span><time datetime="2019-10-20">2019-10-20</time> by 知识铺 </span>
                </div>
                
                <section>
                    

<h1 id="正则表达式">《正则表达式》</h1>

<h2 id="目标">目标</h2>

<pre><code class="language-js">var web_development = &quot;python php ruby javascript jsonp perhapsphpisoutdated&quot;;
</code></pre>

<p>找出其中 包含 <code>p</code> 但不包含 <code>ph</code> 的所有单词，即</p>

<p><code>[ 'python', 'javascript', 'jsonp' ]</code></p>

<h2 id="知识点">知识点</h2>

<ol>
<li>正则表达式的使用</li>
<li>js 中的正则表达式与 pcre(<a href="http://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions">http://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions</a> ) 的区别</li>
</ol>

<h2 id="课程内容">课程内容</h2>

<p>开始这门课之前，大家先去看两篇文章。</p>

<p>《正则表达式30分钟入门教程》：<a href="http://www.cnblogs.com/deerchao/archive/2006/08/24/zhengzhe30fengzhongjiaocheng.html">http://www.cnblogs.com/deerchao/archive/2006/08/24/zhengzhe30fengzhongjiaocheng.html</a></p>

<p>上面这篇介绍了正则表达式的基础知识，但是对于零宽断言没有展开来讲，零宽断言看下面这篇：</p>

<p>《正则表达式之：零宽断言不『消费』》：<a href="http://fxck.it/post/50558232873">http://fxck.it/post/50558232873</a></p>

<p>好了。</p>

<p>在很久很久以前，有一门语言一度是字符串处理领域的王者，叫 perl。</p>

<p>伴随着 perl，有一个类似正则表达式的标准被实现了出来，叫 pcre：Perl Compatible Regular Expressions。</p>

<p>不过遗憾的是，js 里面的正则与 pcre 不是兼容的。很多语言都这样。</p>

<p>如果需要测试你自己写的正则表达式，建议上这里：<a href="http://refiddle.com/">http://refiddle.com/</a> ，可以所见即所得地调试。</p>

<p>接下来我们主要讲讲 js 中需要注意的地方，至于正则表达式的内容，上面那两篇文章足够学习了。</p>

<p>第一，</p>

<p>js 中，对于四种零宽断言，只支持 零宽度正预测先行断言 和 零宽度负预测先行断言 这两种。</p>

<p>第二，</p>

<p>js 中，正则表达式后面可以跟三个 flag，比如 <code>/something/igm</code>。</p>

<p>他们的意义分别是，</p>

<ul>
<li>i 的意义是不区分大小写</li>
<li>g 的意义是，匹配多个</li>
<li>m 的意义是，是 <code>^</code> 和 <code>$</code> 可以匹配<strong>每</strong>一行的开头。</li>
</ul>

<p>分别举个例子：</p>

<pre><code class="language-js">/a/.test('A') // =&gt; false
/a/i.test('A') // =&gt; true

'hello hell hoo'.match(/h.*?\b/) // =&gt; [ 'hello', index: 0, input: 'hello hell hoo' ]
'hello hell hoo'.match(/h.*?\b/g) // =&gt; [ 'hello', 'hell', 'hoo' ]

'aaa\nbbb\nccc'.match(/^[\s\S]*?$/g) // =&gt; [ 'aaa\nbbb\nccc' ]
'aaa\nbbb\nccc'.match(/^[\s\S]*?$/gm) // =&gt; [ 'aaa', 'bbb', 'ccc' ]
</code></pre>

<p>与 m 意义相关的，还有 <code>\A</code>, <code>\Z</code> 和 <code>\z</code></p>

<p>他们的意义分别是：</p>

<pre><code>\A  字符串开头(类似^，但不受处理多行选项的影响)
\Z  字符串结尾或行尾(不受处理多行选项的影响)
\z  字符串结尾(类似$，但不受处理多行选项的影响)
</code></pre>

<p>在 js 中，g flag 会影响 <code>String.prototype.match()</code> 和 <code>RegExp.prototype.exec()</code> 的行为</p>

<p><code>String.prototype.match()</code> 中，返回数据的格式会不一样，加 g 会返回数组，不加 g 则返回比较详细的信息</p>

<pre><code class="language-js">&gt; 'hello hell'.match(/h(.*?)\b/g)
[ 'hello', 'hell' ]

&gt; 'hello hell'.match(/h(.*?)\b/)
[ 'hello',
  'ello',
  index: 0,
  input: 'hello hell' ]

</code></pre>

<p><code>RegExp.prototype.exec()</code> 中，加 g 之后，如果你的正则不是字面量的正则，而是存储在变量中的话，特么的这个变量就会变得有记忆！！</p>

<pre><code class="language-js">&gt; /h(.*?)\b/g.exec('hello hell')
[ 'hello',
  'ello',
  index: 0,
  input: 'hello hell' ]
&gt; /h(.*?)\b/g.exec('hello hell')
[ 'hello',
  'ello',
  index: 0,
  input: 'hello hell' ]


&gt; var re = /h(.*?)\b/g;
undefined
&gt; re.exec('hello hell')
[ 'hello',
  'ello',
  index: 0,
  input: 'hello hell' ]
&gt; re.exec('hello hell')
[ 'hell',
  'ell',
  index: 6,
  input: 'hello hell' ]
&gt;
</code></pre>

<p>第三，</p>

<p>大家知道，<code>.</code> 是不可以匹配 <code>\n</code> 的。如果我们想匹配的数据涉及到了跨行，比如下面这样的。</p>

<pre><code class="language-js">var multiline = require('multiline');

var text = multiline.stripIndent(function () {
/*
    head
    ```
    code code2 .code3```
    ```
    foot
*/
});
</code></pre>

<p>如果我们想把两个 ``` 中包含的内容取出来，应该怎么办？</p>

<p>直接用 <code>.</code> 匹配不到 <code>\n</code>，所以我们需要找到一个原子，能匹配包括 <code>\n</code> 在内的所有字符。</p>

<p>这个原子的惯用写法就是 <code>[\s\S]</code></p>

<pre><code class="language-js">var match1 = text.match(/^```[\s\S]+?^```/gm);
console.log(match1) // =&gt; [ '```\ncode code2 code3```\n```' ]

// 这里有一种很骚的写法，[^] 与 [\s\S] 等价
var match2 = text.match(/^```[^]+?^```/gm)
console.log(match2) // =&gt; [ '```\ncode code2 .code3```\n```' ]
</code></pre>

<p>完。</p>

                </section>
            </article>
        </main>
    </div> 
    
<div class="col-xs-12 col-sm-3 doc-sidebar">
	<div class="sidebar-module">
		<div class="sidebar-toc">
			<h4>Table of Contents</h4>
			<ul>
				<li><strong><a href="#title">lesson9- 正则表达式</a></strong></li>
			</ul>
			<nav id="TableOfContents">
<ul>
<li><a href="#正则表达式">《正则表达式》</a>
<ul>
<li><a href="#目标">目标</a></li>
<li><a href="#知识点">知识点</a></li>
<li><a href="#课程内容">课程内容</a></li>
</ul></li>
</ul>
</nav>
		</div>
	</div>
	<div class="sidebar-module">
		<h4>Tags</h4>
		<div class="tag-box">
		
		</div>
	</div>
</div>

</div> 



<hr />

<div class="row">
    <div class="col-sm-12">
        
	    <div class="text-center">
        
		    <p class="doc-footer-em"><a href="#">回到顶部↑</a></p>
	    </div>
	</div>
</div>

</div> 

<footer class="doc-footer">
	
    <p>Copyright © <a href="https://blog.zshipu.com/">知识铺</a> 2019. Generated by <a href="http://gohugo.io/">Hugo</a></p>
</footer>



<script src="https://blog.zshipu.com/article/js/jquery-1.11.2.min.js"></script>
<script src="https://blog.zshipu.com/article/js/bootstrap.min.js"></script>

<script src="https://blog.zshipu.com/article/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://blog.zshipu.com/article/js/ie10-viewport-bug-workaround.js"></script>

<div style="position:absolute; bottom: 0; right: 0;">
	<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=962982601&auto=1&height=90"></iframe>
</div>
<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();
</script>

</body>
</html>

